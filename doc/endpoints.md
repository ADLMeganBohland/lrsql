[<- Back to Index](index.md)

# REST API

The HTTP methods that are LRS-specific are given in [the xAPI spec](https://github.com/adlnet/xAPI-Spec/blob/master/xAPI-Communication.md#datatransfer). Requests to the LRS (which are denoted by the `xapi` path prefix) must contain a Base64 encoded, colon-separated public and secret API key pair in the `authorization` field of the header. For example (assuming `http://example` is the URL body), `http://example.org/xapi/statements` is the URL at which the user inserts and queries xAPI statements; other URLs are used to insert and query documents, agents, and activities.

In addition to the LRS HTTP methods, the SQL LRS supports methods for admin account creation, login, and use; these methods are denoted by the `admin` path prefix.

### Admin Account Routes

The following examples use `http://example.org` as the URL body. All methods require that the request body is a JSON object that contains `username` and `password` string values; otherwise, a `400 BAD REQUEST` response is returned. All methods return `200 OK` on success. If an unexpected error is encountered, these routes return a JSON object in the body like the following: `{"error": "[error message]"}`.

- `POST http://example.org/admin/account/login`: Log into an existing account. The response body contains a newly generated JSON Web Token (JWT) on success. A `401 UNAUTHORIZED` status code is returned if the credentials are incorrect.
- `POST http://example.org/admin/account/create`: Create a new admin account. The request must contain a JWT in the Authorization header in the form of `Bearer [JWT]` and if it is not valid will return a `401 UNAUTHORIZED`. Returns a JSON object with the ID (UUID) of the newly created user. Returns a `400` error if the request body parameters are invalid, or a `409 CONFLICT` error if the account already exists.
- `DELETE http://example.org/admin/account`: Delete an existing account. The request must contain a JWT in the Authorization header in the form of `Bearer [JWT]` and if it is not valid will return a `401 UNAUTHORIZED`. The endpoint returns a `200` and a JSON object with the ID of the deleted account on success. Returns a `404 NOT FOUND` error if the account does not exist.
- `GET http://example.org/admin/account`: Return an array of all admin accounts in the system. The request must contain a JWT in the Authorization header in the form of `Bearer [JWT]` and if it is not valid will return a `401 UNAUTHORIZED`.

### Admin Credential Routes

The following examples use `http://example.org` as the URL body. All methods require that the `Authorization` header value is a valid JSON Web Token generated by account creation or login. All methods return a `401 UNAUTHORIZED` error if the JWT has expired, or is otherwise invalid. All methods also require that the request body is a JSON object, though the permitted values depend on the route; otherwise, a `400 BAD REQUEST` error is returned. If an unexpected error is encountered, these routes return a JSON object in the body like the following: `{"error": "[error message]"}`.

- `POST http://example.org/admin/creds`: Create a new credential pair, with the specified scope values given by the `scopes` property in the request body.
- `PUT http://example.org/admin/creds`: Update an existing credential pair, given by `api-key` and `secret-key` properties in the request body, with the new scopes given by the `scopes` property.
- `GET http://example.org/admin/creds`: Read all credential pairs and their associated scopes for a particular account (denoted by the JWT).
- `DELETE http://example.org/admin/creds`: Delete an existing credential pair, given by the `api-key` and `secret-key` properties in the request body, as well as any associated scopes.

[<- Back to Index](index.md)
